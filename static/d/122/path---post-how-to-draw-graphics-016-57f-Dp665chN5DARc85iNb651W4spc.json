{"data":{"avatar":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIEBQP/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQD/2gAMAwEAAhADEAAAAcSerUQpOzXUqiMAb//EABsQAAMAAgMAAAAAAAAAAAAAAAABAhESAxQh/9oACAEBAAEFAjzJ1VJcZepyU9x0z//EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAEDAQE/AWP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAADAAIDAAAAAAAAAAAAAAAAASEQERIxMv/aAAgBAQAGPwImPUNtcTodiz//xAAcEAACAgMBAQAAAAAAAAAAAAAAAREhMUFRYXH/2gAIAQEAAT8hWbK7l6NWStvasZEW4S7fwfTTAkNzkQZ//9oADAMBAAIAAwAAABAs1wP/xAAXEQEBAQEAAAAAAAAAAAAAAAABABEQ/9oACAEDAQE/EMLbwL//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAECAQE/EIzR4rv/xAAfEAEAAwACAQUAAAAAAAAAAAABABEhMUFRYXGBodH/2gAIAQEAAT8QAjVRsF68R3WyhBpEB4otans9oxQXOZRxVfkow9YivuDFJrEfPmaECm2kqIiV2XP/2Q==","width":40,"height":40,"src":"/static/9d156e8486b343189790da372acb0018/987ea/my.jpg","srcSet":"/static/9d156e8486b343189790da372acb0018/987ea/my.jpg 1x,\n/static/9d156e8486b343189790da372acb0018/9c097/my.jpg 1.5x,\n/static/9d156e8486b343189790da372acb0018/bd6c6/my.jpg 2x"}}},"site":{"siteMetadata":{"title":"三洋的小站","author":"三洋"}},"markdownRemark":{"id":"cfa00d61-2a14-5090-bf56-912110583ad9","excerpt":"这篇学习和回顾 canvas 系列笔记的第二篇，完整笔记详见：canvas 核心技术通过上一篇canvas 核心技术-如何绘制线段的学习，我们知道了如何去绘制线段。很多的线段的拼接就组成了图形了，比如常见的三角形，矩形，圆形等。常见图形的绘制可以查看我的在线示例：canvas shape示例项目仓库地址：canvas…","html":"<p>这篇学习和回顾 canvas 系列笔记的第二篇，完整笔记详见：<a href=\"/post/core_html5_canvas/\">canvas 核心技术</a></p>\n<p>通过上一篇<a href=\"/post/how_to_draw_line/\">canvas 核心技术-如何绘制线段</a>的学习，我们知道了如何去绘制线段。很多的线段的拼接就组成了图形了，比如常见的三角形，矩形，圆形等。</p>\n<p>常见图形的绘制可以查看我的在线示例：<a href=\"https://snayan.github.io/canvas-demo/?module=shape\">canvas shape</a></p>\n<p>示例项目仓库地址：<a href=\"https://github.com/snayan/canvas-demo\">canvas demo</a></p>\n<h3>图形</h3>\n<h4>三角形</h4>\n<p>先来看看如何绘制一个三角形。三角形就是由三条边组成，我们可以理解为三个线段组成。确定了三角形的三个顶点的坐标位置，然后用线连接起来。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 顶底1</span>\n<span class=\"token keyword\">let</span> point1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 顶点2</span>\n<span class=\"token keyword\">let</span> point2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 顶点3</span>\n<span class=\"token keyword\">let</span> point3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">180</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 开始一段新路径</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 移动起点到顶点1</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 连接顶点1与顶点2</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 连接顶点2与顶点3</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 描边</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 绘制文本水平居中</span>\nctx<span class=\"token punctuation\">.</span>textAlign <span class=\"token operator\">=</span> <span class=\"token string\">\"center\"</span>\n<span class=\"token comment\">// 绘制顶点1文本</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 绘制顶点2文本</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>point2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>point2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">,</span> point2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">25</span><span class=\"token punctuation\">,</span> point2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 绘制顶点3文本</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>point3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">,</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>point3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)`</span></span><span class=\"token punctuation\">,</span> point3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> point3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span></code></pre></div>\n<!--more-->\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ece4fa813fd55b810afde1714df55de2/52699/triangle1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.66457680250783%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAwklEQVQoz42S2w6EIAxE+f+fVHkgBgXxgleEHbeJazZ13fNAoDLtlCqMMc2Fruv6vsdqrW2eEOu67hfKsiyKQmsdYwwh7ByIp5QOMe1OvPdVVU3TlO5BXqxt237EFBqGYVmW8/iXmM7jOKLb9ARTGRs80o+CjBgmt20jJR7v7jbxLZZSZlmmlKLZOOfgHJ3P84ykrBHGNkUhgBdqHp/xFyARJpfnOcqQNV58B6XD/DDkUwyPoq5ry2He0J7aAdcLsPMCZTuA9pfHBkoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"triangle1\"\n        title=\"\"\n        src=\"/static/ece4fa813fd55b810afde1714df55de2/b9e4f/triangle1.png\"\n        srcset=\"/static/ece4fa813fd55b810afde1714df55de2/cf440/triangle1.png 148w,\n/static/ece4fa813fd55b810afde1714df55de2/d2d38/triangle1.png 295w,\n/static/ece4fa813fd55b810afde1714df55de2/b9e4f/triangle1.png 590w,\n/static/ece4fa813fd55b810afde1714df55de2/52699/triangle1.png 638w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>从图可以看到，我们还有一条边没有连接起来，这是因为我们只显示的连接了 2 个顶点。要想把第三条边也连接起来，我们有 2 种方式。第一种方式是，我们显示的连接顶点 3 与顶点 1</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 第一种方式，显示的连接顶点3于顶点1</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>第二种方式是，我们调用<code class=\"language-text\">ctx.closePath()</code>来按 canvas 自动帮我们连接未关闭的路径。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 第二种方式，调用ctx.closePath()</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">closePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>无论哪一种都可以实现我们想要三角形。其中第二种方式会用的比较多，因为它会帮我们自动关闭当前路径，也就是使当前路径形成一个闭合的路径，这个在填充时是非常有用的，下面会说的。最终，我们得到三角形图形如下</p>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a2a88acbbf274e8d25fe1c32880fd65a/8a209/triangle2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.51572327044025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAA1ElEQVQoz5WS5wqEMBCE8/4PKSIqKraz1+S+cyEG9Nr8EHeTmdkSled56eBxoK7r8geoZVl2B3Ec+76fJInWetu2/Q7kjTFVVSkC42AYBvjTNJn3QJcvBSqRsamu65qmQeIPssTjOJISib7vbf67Mz/MQB+QM7Ru+Sd5XVfaJobJ8NxLzPy2+ZMcBIHneVEUFUXBACG0bYsnQlzihi3tk7PsBiu65QAhasmyLE1T3gIeYRjO8wxNFoSNugpfQSGUwxSFJs4vsn1VLuoDNhQmsBnWSVFPCOh/1hUxM5AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"triangle2\"\n        title=\"\"\n        src=\"/static/a2a88acbbf274e8d25fe1c32880fd65a/b9e4f/triangle2.png\"\n        srcset=\"/static/a2a88acbbf274e8d25fe1c32880fd65a/cf440/triangle2.png 148w,\n/static/a2a88acbbf274e8d25fe1c32880fd65a/d2d38/triangle2.png 295w,\n/static/a2a88acbbf274e8d25fe1c32880fd65a/b9e4f/triangle2.png 590w,\n/static/a2a88acbbf274e8d25fe1c32880fd65a/8a209/triangle2.png 636w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h4>四边形</h4>\n<p>通过三个顶点，我们可以绘制一个三角形，那么通过四个点，我们当然可以绘制出四边形，我们照例来通过四个点来绘制一个矩形。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// p1</span>\n<span class=\"token keyword\">let</span> point1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// p2</span>\n<span class=\"token keyword\">let</span> point2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">180</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// p3</span>\n<span class=\"token keyword\">let</span> point3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">110</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// p4</span>\n<span class=\"token keyword\">let</span> point4 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">180</span><span class=\"token punctuation\">,</span> <span class=\"token number\">110</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 设置描边颜色为绿色</span>\nctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"green\"</span>\n<span class=\"token comment\">// 开始新的一段路径</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 移动起点到p1</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 连接p1与p2</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 连接p2与p4</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 连接p4与p3</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 关闭当前路径，隐士连接p3与p1</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">closePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 描边</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 绘制顶点</span>\nctx<span class=\"token punctuation\">.</span>textAlign <span class=\"token operator\">=</span> <span class=\"token string\">\"center\"</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"p1\"</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"p2\"</span><span class=\"token punctuation\">,</span> point2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> point2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"p3\"</span><span class=\"token punctuation\">,</span> point3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> point3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"p4\"</span><span class=\"token punctuation\">,</span> point4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> point4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a3bb00e03814850b24db23214de366c5/857ee/rect.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.56410256410257%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAA2UlEQVQoz51Si46EIBDz/79zL2qiwiAvBwauym7Wi5eN2aYhzNCmvLppmpYDSimt9Qwsf4glIlougLBjZhEppcQY4a+1Fim11CdrhWAYBjkh54w+xB2KegAt552JtEZzJjltra0nIAkjtvM0t9ptzgSSIkkSyMK5ZGVnzD+ajy16dp79W3Q0jaeU75g3B17M+itzuZn8OjN5xZm3FMGYAqdtsXOW/L8Zl9yKEMLj52Hjiqg1mEaUalV93zdPQ8vDp3g/1X20sN2Mv2KMoRc06SvPgl2j9844jr9mmYH2RxBxawAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"rect\"\n        title=\"\"\n        src=\"/static/a3bb00e03814850b24db23214de366c5/b9e4f/rect.png\"\n        srcset=\"/static/a3bb00e03814850b24db23214de366c5/cf440/rect.png 148w,\n/static/a3bb00e03814850b24db23214de366c5/d2d38/rect.png 295w,\n/static/a3bb00e03814850b24db23214de366c5/b9e4f/rect.png 590w,\n/static/a3bb00e03814850b24db23214de366c5/857ee/rect.png 624w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>注意，我们的顺序是 p1—> p2—> p4—> P3，由于矩形是一种特殊的四边形，在 canvas 中提供了一种方法可以快速创建一个矩形，如果知道了 p1 的坐标和矩形的宽度和高度，那么我们就可以确定了其他三个点的坐标。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 快速创建矩形</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">rect</span><span class=\"token punctuation\">(</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>在创建矩形，我们总是使用<code class=\"language-text\">ctx.rect(left,top,width,height)</code>，但是绘制非矩形的四边形，还是得按照每个点去连接成线段来绘制。</p>\n<h4>圆与圆弧</h4>\n<p>圆形可以看作是无数个很小的线段连接起来的，但是通过去定顶点来绘制圆形，显然不现实。canvas 中提供了一个专门绘制圆形的方法<code class=\"language-text\">ctx.arc(left,top,radius,startAngle,endAngle,antiClockwise)</code>。各个参数的顺序意思是，圆心坐标 X 值，圆心坐标 Y 值，半径，开始弧度，结束弧度，是否逆时针。通过指定<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mi>A</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding=\"application/x-tex\">startAngle = 0</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">s</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span></span></span></span>和<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>e</mi><mi>n</mi><mi>d</mi><mi>A</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>e</mi><mo>=</mo><mi>M</mi><mi>a</mi><mi>t</mi><mi>h</mi><mi mathvariant=\"normal\">.</mi><mi>P</mi><mi>I</mi><mo>∗</mo><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">endAngle = Math.PI*2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathdefault\">e</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\">d</span><span class=\"mord mathdefault\">A</span><span class=\"mord mathdefault\">n</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathdefault\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathdefault\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathdefault\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathdefault\">a</span><span class=\"mord mathdefault\">t</span><span class=\"mord mathdefault\">h</span><span class=\"mord\">.</span><span class=\"mord mathdefault\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathdefault\" style=\"margin-right:0.07847em;\">I</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">2</span></span></span></span>，就可以绘制一个完整的圆了。最后一个参数<code class=\"language-text\">antiClockwise</code>对于图片的填充时会非常有用，后面讲填充时会详细说到。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 圆心坐标</span>\n<span class=\"token keyword\">let</span> center <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">75</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 半径</span>\n<span class=\"token keyword\">let</span> radius <span class=\"token operator\">=</span> <span class=\"token number\">50</span>\n<span class=\"token comment\">// 开始弧度值</span>\n<span class=\"token keyword\">let</span> startAngle <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token comment\">// 结束弧度值，360度=Math.PI * 2</span>\n<span class=\"token keyword\">let</span> endAngle <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span>\n<span class=\"token comment\">// 是否逆时针</span>\n<span class=\"token keyword\">let</span> antiClockwise <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n<span class=\"token comment\">// 描边颜色</span>\nctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"blue\"</span>\nctx<span class=\"token punctuation\">.</span>lineWidth <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">arc</span><span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> center<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> radius<span class=\"token punctuation\">,</span> startAngle<span class=\"token punctuation\">,</span> endAngle<span class=\"token punctuation\">,</span> antiClockwise<span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 将圆形描边绘制出来</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 绘制出圆心和半径示意图,读者可以忽略下半部代码</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">arc</span><span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> center<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> startAngle<span class=\"token punctuation\">,</span> endAngle<span class=\"token punctuation\">,</span> antiClockwise<span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> center<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> radius<span class=\"token punctuation\">,</span> center<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"blue\"</span>\nctx<span class=\"token punctuation\">.</span>font <span class=\"token operator\">=</span> <span class=\"token string\">\"24px sans-serif\"</span>\nctx<span class=\"token punctuation\">.</span>textAlign <span class=\"token operator\">=</span> <span class=\"token string\">\"center\"</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fillText</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span> center<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> radius <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> center<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa7298352748c3ac03074dc9a59ccd78/8a209/arc.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 51.57232704402516%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAxElEQVQoz42S2w6EIAxE/f8/FV1sQQSVtltk1Zf1MiEYzRyYtjbee2MMAAyb9IlY1v7hj6y16leqcc6llESEmbdd0iwhSia5UnUqeMKqNPOANEVKiX2gMNFbOOdCHo625c9A87LFuYFjLLDeM06bNdM8raYX9Hrcr5ZHWKNWOI+4aOWAevkTXGMTsQWqvrpr2TX2Zc06qr1hvKwMpWEcE4MrnbtpmII1djxHJaLwGPjVqEIIXdchYvlPoMi5so7XK/V9/wUuOkfdNhTm9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"arc\"\n        title=\"\"\n        src=\"/static/fa7298352748c3ac03074dc9a59ccd78/b9e4f/arc.png\"\n        srcset=\"/static/fa7298352748c3ac03074dc9a59ccd78/cf440/arc.png 148w,\n/static/fa7298352748c3ac03074dc9a59ccd78/d2d38/arc.png 295w,\n/static/fa7298352748c3ac03074dc9a59ccd78/b9e4f/arc.png 590w,\n/static/fa7298352748c3ac03074dc9a59ccd78/8a209/arc.png 636w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>我们还可以改变起始和结束弧度的值，来绘制不同角度的弧形。比如八分之一圆弧，四分之圆弧，半圆弧等。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 圆心坐标</span>\n<span class=\"token keyword\">let</span> center <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">75</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 半径</span>\n<span class=\"token keyword\">let</span> radius <span class=\"token operator\">=</span> <span class=\"token number\">20</span>\n<span class=\"token comment\">// 起始弧度为0</span>\n<span class=\"token keyword\">let</span> startAngle <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token comment\">// 是否逆时针</span>\n<span class=\"token keyword\">let</span> antiClockwise <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n<span class=\"token comment\">// 弧度长度</span>\n<span class=\"token keyword\">let</span> angles <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span> <span class=\"token operator\">/</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 描边颜色</span>\n<span class=\"token keyword\">let</span> colors <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"orange\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span> angle<span class=\"token punctuation\">]</span> <span class=\"token keyword\">of</span> angles<span class=\"token punctuation\">.</span><span class=\"token function\">entries</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 计算结束弧度</span>\n  <span class=\"token keyword\">let</span> endAngle <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> <span class=\"token number\">2</span> <span class=\"token operator\">*</span> angle\n  <span class=\"token comment\">// 设置描边颜色</span>\n  ctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> colors<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>\n  <span class=\"token comment\">// 开始新的路径</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// 绘制圆弧</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">arc</span><span class=\"token punctuation\">(</span>\n    center<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> i <span class=\"token operator\">*</span> radius <span class=\"token operator\">*</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    center<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    radius<span class=\"token punctuation\">,</span>\n    startAngle<span class=\"token punctuation\">,</span>\n    endAngle<span class=\"token punctuation\">,</span>\n    antiClockwise\n  <span class=\"token punctuation\">)</span>\n  <span class=\"token comment\">// 描边</span>\n  ctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b266280147500646533a5eb24d5fd041/83cbb/angle.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 53.18471337579618%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAoUlEQVQoz71Syw6DMAzj/3+UCwz6pk3iLKMITdp2YJPmQ+Skta1GHaZpun2FeZ6H1ppcBDOr6rIsgzV6EQCsOuf+I4ageQV/ENuI6JmykECsIWHUAN52E3ojhm0up05dkJh0oxyKT1uMNSpXaQGUYXW/9JKM40m5dHctreSaemPJJn4cn8m2d7xA9SSH3THdec9b1/W3bdtfcRdhmd77cRzvDbqF3z5fLcsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"angle\"\n        title=\"\"\n        src=\"/static/b266280147500646533a5eb24d5fd041/b9e4f/angle.png\"\n        srcset=\"/static/b266280147500646533a5eb24d5fd041/cf440/angle.png 148w,\n/static/b266280147500646533a5eb24d5fd041/d2d38/angle.png 295w,\n/static/b266280147500646533a5eb24d5fd041/b9e4f/angle.png 590w,\n/static/b266280147500646533a5eb24d5fd041/83cbb/angle.png 628w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h4>任意多边形</h4>\n<p>上面说的都是一些比较简单和常见的图形，我们如何可以绘制任意多边形，比如五边形，六边形，八边形等。其实，在绘制四边形的时候就说过了，可以通过确定顶点坐标，然后把这些顶点按照一定顺序连接起来就可以了。下面，来实现一个通用的多边形的绘制方法。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Polygon</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx<span class=\"token punctuation\">,</span> points</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ctx <span class=\"token operator\">=</span> ctx\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>points <span class=\"token operator\">=</span> points\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>ctx <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">CanvasRenderingContext2D</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span>\n        <span class=\"token string\">\"Polygon#ctx must be an CanvasRenderingContext2D instance\"</span>\n      <span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Polygon#points must be an Array\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">let</span> firstPoint <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">let</span> restPoint <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>points<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n    ctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    ctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>firstPoint<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> firstPoint<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> point <span class=\"token keyword\">of</span> restPoint<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      ctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    ctx<span class=\"token punctuation\">.</span><span class=\"token function\">closePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>通过实例化这个<code class=\"language-text\">Polygon</code>，并传入多边形的顶点坐标，我们就可以绘制出不同的多边形。例如下面的代码，分别绘制了五边形，六边形。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 绘制五边形</span>\n<span class=\"token keyword\">let</span> points <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">80</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">55</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> pentagon <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Polygon</span><span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"blue\"</span>\npentagon<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// 绘制六边形</span>\npoints <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">160</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">210</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">230</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">210</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">160</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token number\">140</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> hexagon <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Polygon</span><span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">,</span> points<span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"green\"</span>\nhexagon<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c6eeb0687696b87a84d1af97685a125a/e49a9/polygin.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.81250000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAAy0lEQVQoz5WS6w6DIAyFef8HXUyUSlEoA1qG4iUx2XQn/dEAH6elqGEYxv8FAIionHOlFGFu8VAiUl0VEVWYZYuLpMgRl61qrkIgOxc9srEyAE8zL8x6MnGCGdBjjZpkzlcYrcepHAAYznkzQcKYY8tDCpZsq+WEX51L6YQ9ibGLeUzREq7r+10em3njFxhG7/zeoRScmMIK5wdw7ZnCwjAXYzMFOYD7sttrh7eAyTHJUf/tg9Vpb/A3/RiV1lp1Xdd+jNbwXJXs+/4D6EKBUNCxTUUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"polygon\"\n        title=\"\"\n        src=\"/static/c6eeb0687696b87a84d1af97685a125a/b9e4f/polygin.png\"\n        srcset=\"/static/c6eeb0687696b87a84d1af97685a125a/cf440/polygin.png 148w,\n/static/c6eeb0687696b87a84d1af97685a125a/d2d38/polygin.png 295w,\n/static/c6eeb0687696b87a84d1af97685a125a/b9e4f/polygin.png 590w,\n/static/c6eeb0687696b87a84d1af97685a125a/e49a9/polygin.png 640w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h3>填充</h3>\n<p>上面，我们都是用描边把图形绘制出来，还有一种用的比较多的就是填充了。填充就是用特定的颜色把图形包围的区域涂满。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 顶底1</span>\n<span class=\"token keyword\">let</span> point1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 顶点2</span>\n<span class=\"token keyword\">let</span> point2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 顶点3</span>\n<span class=\"token keyword\">let</span> point3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">180</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">// 用红色描边</span>\nctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span>\n<span class=\"token comment\">// 用黄色填充</span>\nctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"yellow\"</span>\n<span class=\"token comment\">// 设置线段宽度为2</span>\nctx<span class=\"token punctuation\">.</span>lineWidth <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n<span class=\"token comment\">// 开始一段新路径</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 移动起点到顶点1</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 连接顶点1与顶点2</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 连接顶点2与顶点3</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 关闭当前路径</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">closePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 描边</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 填充</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a9cfb5799a431163b110145346cc2d81/52699/fill1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.66457680250783%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAA/ElEQVQoz52SMU4DMRBFLQpEQYmgpaaChnNwDypqjpIaLkDDGRDiCqmQ1uCd2I7xBsXzh/FuRMFuCOJLtmbk/2zP2MY5t/iXiMiklESklMIbFUY/b5eaFVHedF2nEQAZBMZyrrNGskWDOYTwDeuo+3F8Zjrm8Njb1n+Ea478wf5SxHA64vDUO3k3rFXrwdzeCIzwYeXjKeJ8KOR3uCbczvBpRPaUFNmvfDhDasb86Np6rLvjcM3hCvEc6QSrAymmLC7Q2QHZUXM1rAWrgvyG+AL/wHTLr/c9OAXnnDfdrr0pEy+ka8D42t570zTN8F1+qnXUvhNZIkdTstZ+AdBMbeIDDYkNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"fill1\"\n        title=\"\"\n        src=\"/static/a9cfb5799a431163b110145346cc2d81/b9e4f/fill1.png\"\n        srcset=\"/static/a9cfb5799a431163b110145346cc2d81/cf440/fill1.png 148w,\n/static/a9cfb5799a431163b110145346cc2d81/d2d38/fill1.png 295w,\n/static/a9cfb5799a431163b110145346cc2d81/b9e4f/fill1.png 590w,\n/static/a9cfb5799a431163b110145346cc2d81/52699/fill1.png 638w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>需要注意的是，如果当前路径没有关闭，那么会先默认关闭当前路径，然后在进行填充 ，如下，我们把<code class=\"language-text\">ctx.closePath()</code>注释掉。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> point1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> point2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> point3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">180</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">]</span>\nctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span>\nctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"yellow\"</span>\n<span class=\"token comment\">// 设置线段宽度为2</span>\nctx<span class=\"token punctuation\">.</span>lineWidth <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// ctx.closePath();</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a460648bb74e8175f667e9f75562230d/b2a12/fill2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 53.01587301587302%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAAA80lEQVQoz42SPU4DMRCFrVQUNBwDxAHoKWg4BBUtbcQhcgWOgUTHRZCoVkj+X7EEx/MetiPEsptEeRqNNPZ8z/LYSmttpzL2CBljVEpJ/imP8m7lnEk651QpOJYIUs+DAlByCGEMVz9xL/J1Dr5vnY6DW41PLeGSVMAVaPfx85MFG4q+JxTltGTgtpFocQiuvJgVkiIXlecJoIR3jZvyI7iNDt8iH48SrxEvMJxhvWCuLuADZ/wfXOaOraRYUIZB+rfsX7N9ErvM9ib3z6UZ+G0rje2m3vvZU+2Yz2bvnctfCRN5H3xZNDWiC7Gf7fsYY9d1P2KzbxiWAibbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"fill2\"\n        title=\"\"\n        src=\"/static/a460648bb74e8175f667e9f75562230d/b9e4f/fill2.png\"\n        srcset=\"/static/a460648bb74e8175f667e9f75562230d/cf440/fill2.png 148w,\n/static/a460648bb74e8175f667e9f75562230d/d2d38/fill2.png 295w,\n/static/a460648bb74e8175f667e9f75562230d/b9e4f/fill2.png 590w,\n/static/a460648bb74e8175f667e9f75562230d/b2a12/fill2.png 630w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>如果当前路径是循环的，或者是包含多个相交的子路径，那么 canvas 何如进行填充呢？比如下面这样的，为何在填充时，中间这一块没有被填充？</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> point1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">30</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> point2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> point3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">180</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> point4 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> point5 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">160</span><span class=\"token punctuation\">,</span> <span class=\"token number\">80</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">let</span> point6 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">70</span><span class=\"token punctuation\">,</span> <span class=\"token number\">120</span><span class=\"token punctuation\">]</span>\nctx<span class=\"token punctuation\">.</span>strokeStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"red\"</span>\nctx<span class=\"token punctuation\">.</span>fillStyle <span class=\"token operator\">=</span> <span class=\"token string\">\"yellow\"</span>\nctx<span class=\"token punctuation\">.</span>lineWidth <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">beginPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 绘制三角形1, 顺序：p1--p2--p3--p1</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point2<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point2<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point3<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point1<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\">// 绘制三角形2,顺序：p4--p5--p6--p4</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>point4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point5<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point5<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point6<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point6<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/010004b5ea9ad1b103073b38b2800e32/f1147/fill3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 52.07667731629393%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABV0lEQVQoz3WSvU4DMQzHu/AcIPEMPAUSCysjI2+AeAQkxMTCxCMwgoTEwMLeAXWAft6dklySu+Z6udjGSWlpi7CsKLbzs6Pk31NKSSnLLVNaq62EMaXWcV251jrP8x6XAIA2jKOm2YgRqW2p62jRRPcttgtOW2t34Ljx6tmMHhLVxRUCSAFSwmwKQoAoQj6jztuq+oV9640hmg+h3kffA/340w4RlYSqgiJDpbBU3IsaZ+s6wSFE2E7qr2Oc3IA5h+oIxCGW76Ej53zswfB0zF3SjXD32uAdTq8QHHEJCZs5Du5c/16WXAzEA7ynAH/hODmfFO3HLdUvWH2CegNxhos9nB/QYrB+jtUL7k5GQALbd6PTUDxB8Yr2Guwl2JNueFGMXYjn8T84ZQHzYllaxmkeuOA9bf3dChZCsEh0MlaCtaUuWTMsEqE1OwvGmqSKtSXVmCzLvgF1JzUnBqbt6gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"fill3\"\n        title=\"\"\n        src=\"/static/010004b5ea9ad1b103073b38b2800e32/b9e4f/fill3.png\"\n        srcset=\"/static/010004b5ea9ad1b103073b38b2800e32/cf440/fill3.png 148w,\n/static/010004b5ea9ad1b103073b38b2800e32/d2d38/fill3.png 295w,\n/static/010004b5ea9ad1b103073b38b2800e32/b9e4f/fill3.png 590w,\n/static/010004b5ea9ad1b103073b38b2800e32/f1147/fill3.png 626w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>我们来具体研究一下<code class=\"language-text\">fill</code>函数，查看<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fill\">MDN</a>上的解释，</p>\n<blockquote>\n<p>The <code class=\"language-text\">CanvasRenderingContext2D</code><strong>.fill()</strong> method of the Canvas 2D API fills the current or given path with the current fill style using the non-zero or even-odd winding rule</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"> <span class=\"token keyword\">void</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>fillRule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">void</span> ctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span> fillRule<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</blockquote>\n<p>fillRule 参数是可选的，可取值为<code class=\"language-text\">nonzero</code>,<code class=\"language-text\">evenodd</code>。也就是说，<code class=\"language-text\">fill</code>函数可以给当前路径或者给定的路径，使用<strong>非零环绕规则</strong>或者<strong>奇偶规规则</strong>来填充。path 参数是一个<code class=\"language-text\">Path2D</code>对象，是一个给定的路径，canvas 中默认的是当前路径，这个参数并不是所有的浏览器都支持，目前看，还有 IE 系列和移动设备上都没有很好的支持，就不多说了，具体可以查看<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Path2D\">Path2D</a>。</p>\n<h4>非零环绕规则</h4>\n<p>对于路径中的任意给定区域，从该区域内部画出一条足够长的线段，使此线段的终点完全落在路径范围之外。接下来，将计数器初始化为 0，然后，每当这条线段与路径上的直线或者曲线相交时，就改变计数器的值。如果是与路径的顺时针部分相交，则加 1，如果是与路径的逆时针部分相交，则减 1。最后，如计数器的值不为 0，则此区域就在路径里面，调用<code class=\"language-text\">fill</code>时，该区域被填充。如果计数器的最终值为 0，则此区域就不在路径里面，调用<code class=\"language-text\">fill</code>时，该区域就不被填充。canvas 的<code class=\"language-text\">fill</code>默认使用的就是这种非零环绕规则。</p>\n<p>再来看看上图，为何中间交叉区域没有被填充。我们绘制了 2 个三角形，第一绘制顺序是 p1 —> p2 —> p3 —> p1，第二个绘制顺序是 p4 —> p5 —> p6 —> p4 。可以看到第一个三角形在绘制是逆时针方向的，第二个三角形绘制是顺时针方向的，中间相交区域的计数器最终值就为 0 了，所以不应该包含在这个路径中。</p>\n<p>非零环绕规则演示可以查看我的示例：<a href=\"https://snayan.github.io/canvas-demo/?module=cutout\">非零环绕示例</a></p>\n<h4>奇偶规则</h4>\n<p>跟非零环绕规则类似，都是从任意区域画出一条足够长的线，使此线段的终点完全落在路径范围之外。如果这个线段与路径相交的个数位奇数，则此区域包含在路径中，如果为偶数，则表示此区域不包含在路径中。</p>\n<p>例如，我们把上面的例子改下，绘制第二个三角形的顺序改成逆时针 p4 —> p6 —> p5 —> P4，然后分别用<strong>非零环绕规则</strong>和<strong>奇偶规则</strong>来填充，看看效果。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">//绘制三角形2,注意顺序变了:p4-p6-p5-p4</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">moveTo</span><span class=\"token punctuation\">(</span>point4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point6<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point6<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point5<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point5<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">lineTo</span><span class=\"token punctuation\">(</span>point4<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> point4<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//描边</span>\nctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//填充,  默认就是非零环绕规则</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/25f03a80d80cbd2b7d645ca3031acfcd/83cbb/fill4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 51.910828025477706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABSUlEQVQoz3WSO04DMRCGV5ESipScA3EJSg6RjqtQUHAFeoREzQGoKRAv0ZAENt7H2N5X7PXMYG+SJRuJX7OW9Wu+Ga89Ud5JDgRKDR2l/BfWXXjFcRwBACLyngi5rnigpmFrg+ujaaiumUgXxQEcNq180POrbutCLSLMUpSA8Q/65Cx1iWBrdFn+wdYYAMOVxOKEbIT5DdO2HEFOStJiTokgITBNuCp3sAsd2jKr5+dcnhKOmCfUHBHcoaWqNIFXEt9f8eMNX56x0N7RWvedqV0z6TPmiGnKNPY8m/H68zLLuvMjsU/z4Rx1J+3h0Hm1NGY5C7CdkJ2yGTFG1Bxz89hfx/ZGiQ47e4MqUX3PnL4n9YTqFuU16plbXKy+oO3+/T94Y7MQNHg4n4bWte3gLXt4f0h8IV3kEjKAHMKaSpnJbiYGMwSwGZJfa64s1TQ0HbAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"fill4\"\n        title=\"\"\n        src=\"/static/25f03a80d80cbd2b7d645ca3031acfcd/b9e4f/fill4.png\"\n        srcset=\"/static/25f03a80d80cbd2b7d645ca3031acfcd/cf440/fill4.png 148w,\n/static/25f03a80d80cbd2b7d645ca3031acfcd/d2d38/fill4.png 295w,\n/static/25f03a80d80cbd2b7d645ca3031acfcd/b9e4f/fill4.png 590w,\n/static/25f03a80d80cbd2b7d645ca3031acfcd/83cbb/fill4.png 628w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<p>上面两个三角形的顺序都是逆时针，所以按照非零环绕规则，像个三角形的相交区域的计数器的最终值为-2，不为 0，则包含在路径中改，被填充了。</p>\n<p>同样的顺序，我们在改用奇偶规则来填充。</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">ctx<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"evenodd\"</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//填充,  改用奇偶规则</span></code></pre></div>\n<p><a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/00b250e0e5e4853937fff11fd50465b0/b2a12/fill5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 53.01587301587302%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAPoAAAD6AG1e1JrAAABdklEQVQoz31RO04EMQydip6OG9BzA44AVNRcgJIrIGokakRFiUSNhJAQVDQLArRC+4GdT5KJs7vzS+zgySDY3YInJ0psvzzHjoQQagVSqv8REpgYNU2DS3COeNlFB1rL5tiaGl178N4zP+KoXwTZbDgOUT5Tuxdz0pqyjJSgLCWdY5qwGwD+yOQd7whXVqyTfgiu1kPFHJVsOUqglJQrjCe+rsGYyLk2o6nKycctyUcUm+QjhA2aPv2o1zWVBY6H2H/HJKaqRAOeMCgHMllvky33dURwj/IUzb4bHfpkKFJdlG0cxyN8eabPcXiPFsumovJN/8w3eVBD/gHmPfe8PR31wveRFtvyS+7KTtOqeDvz8gTza/y8c5M9nK1x/WR2fdc91iDsWrhEpu5m7WxwUCfnmA/Q3KC+dOqY5I5+vUgEhx0ideh6rLX+6XY3lCTzZeVX0WouTzNkt2SeNQRogOk0N6DYCzoHLQHYFI8ElsEJxpg4jr8B4wBtVwb6JekAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    ></span>\n    <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;box-shadow:inset 0px 0px 0px 400px white;\"\n        alt=\"fill5\"\n        title=\"\"\n        src=\"/static/00b250e0e5e4853937fff11fd50465b0/b9e4f/fill5.png\"\n        srcset=\"/static/00b250e0e5e4853937fff11fd50465b0/cf440/fill5.png 148w,\n/static/00b250e0e5e4853937fff11fd50465b0/d2d38/fill5.png 295w,\n/static/00b250e0e5e4853937fff11fd50465b0/b9e4f/fill5.png 590w,\n/static/00b250e0e5e4853937fff11fd50465b0/b2a12/fill5.png 630w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n  </span>\n  </a></p>\n<h3>小结</h3>\n<p>这篇我们主要学习了 canvas 中如何绘制图形，比如常见的三角形，四边形，圆心，以及任意多边形。在绘制图形时，有些比如矩形，圆形等 canvas 已经提供了内置的函数，<code class=\"language-text\">ctx.rect()</code>和<code class=\"language-text\">ctx.arc</code>可以直接绘制，但是对于任意多边形，我们则需要自己逐线段的绘制。</p>\n<p>在绘制路径时，是有顺序的。理解 canvas 中路径，和当前绘制的顺序，就可以很好的理解了 canvas 中填充规则了。canvas 中填充有<strong>非零环绕规则</strong>和<strong>奇偶规则</strong>。对于同样的路径，不同的规则可能会产生不同的填充区域，是使用时，注意路径顺序就好了。</p>","frontmatter":{"title":"canvas核心技术-如何绘制图形","date":"July 18, 2018"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/how_to_draw_graphics/","previous":{"fields":{"slug":"/post/how_to_draw_line/"},"frontmatter":{"title":"canvas核心技术-如何绘制线段"}},"next":{"fields":{"slug":"/post/how_to_draw_image_and_text/"},"frontmatter":{"title":"canvas核心技术-如何绘制图片和文本"}}}}