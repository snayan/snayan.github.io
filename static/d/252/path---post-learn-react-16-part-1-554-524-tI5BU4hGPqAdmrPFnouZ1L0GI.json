{"data":{"avatar":{"childImageSharp":{"fixed":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIEBQP/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQD/2gAMAwEAAhADEAAAAcSerUQpOzXUqiMAb//EABsQAAMAAgMAAAAAAAAAAAAAAAABAhESAxQh/9oACAEBAAEFAjzJ1VJcZepyU9x0z//EABURAQEAAAAAAAAAAAAAAAAAABEg/9oACAEDAQE/AWP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAbEAADAAIDAAAAAAAAAAAAAAAAASEQERIxMv/aAAgBAQAGPwImPUNtcTodiz//xAAcEAACAgMBAQAAAAAAAAAAAAAAAREhMUFRYXH/2gAIAQEAAT8hWbK7l6NWStvasZEW4S7fwfTTAkNzkQZ//9oADAMBAAIAAwAAABAs1wP/xAAXEQEBAQEAAAAAAAAAAAAAAAABABEQ/9oACAEDAQE/EMLbwL//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAECAQE/EIzR4rv/xAAfEAEAAwACAQUAAAAAAAAAAAABABEhMUFRYXGBodH/2gAIAQEAAT8QAjVRsF68R3WyhBpEB4otans9oxQXOZRxVfkow9YivuDFJrEfPmaECm2kqIiV2XP/2Q==","width":40,"height":40,"src":"/static/9d156e8486b343189790da372acb0018/987ea/my.jpg","srcSet":"/static/9d156e8486b343189790da372acb0018/987ea/my.jpg 1x,\n/static/9d156e8486b343189790da372acb0018/9c097/my.jpg 1.5x,\n/static/9d156e8486b343189790da372acb0018/bd6c6/my.jpg 2x"}}},"site":{"siteMetadata":{"title":"三羊的小站","author":"三羊","postPath":"/post","contentUrl":"https://github.com/snayan/blog-source/tree/master/content/blog","menu":{"search":{"name":"搜索","link":"/search"}}}},"markdownRemark":{"id":"f2e699e6-5fec-5559-b8d5-8d05c09d0e81","excerpt":"趁着离职期这段时间，制定了一个计划，再次阅读 React16 的源码，React16 是一个大版本的更新，其中新增了许多的新特性，并且重写了核心模块的架构，叫做Fiber，最令人兴奋的是async rendering。之前也浅显的阅读过 React15 的部分源码，发现这次 React1…","html":"<p>趁着离职期这段时间，制定了一个计划，再次阅读 React16 的源码，React16 是一个大版本的更新，其中新增了许多的新特性，并且重写了核心模块的架构，叫做<strong>Fiber</strong>，最令人兴奋的是<strong>async rendering</strong>。之前也浅显的阅读过 React15 的部分源码，发现这次 React16 与之有很大的不同。</p>\n\n          <h2 id='toc-2-1' >\n            核心文件\n          </h2>\n        \n<p>React16 真的是重新梳理了代码结构，并且解耦了很多，下面为 React16 的文件结构</p>\n<p><img src=\"./react16_file_structure.jpg\" alt=\"react16的文件结构\"></p>\n<p>可以看到我们熟悉的 react 和 react-dom。react-art 是绘制图形的，比如 Canvas，SVG，VML。react-call-return 是一个试验性的，用于 react 中的多遍渲染。react-reconciler 是 Fiber 的实现。share 中存放着一些公用的方法和属性。</p>\n<!--more-->\n\n          <h2 id='toc-2-2' >\n            React 目录\n          </h2>\n        \n<p>react 目录下存放着 react 的核心文件，如图</p>\n<p><img src=\"./react-strycture.jpg\" alt=\"react目录\"></p>\n<p>看着是不是很熟悉，跟 react15 的很多一样。ReactBaseClasses 实现了<code>Component</code>和<code>PureComponent</code>。ReactChildren 里是一些工具函数。ReactCurrentOwner 就是创建当前上下文环境对象。ReactElement 实现了<code>createElement</code>，<code>createFactory</code>，<code>cloneElement</code>，<code>isvalidElement</code>。ReactElementValidator 用于验证<code>ReactElement</code>相关方法。<code>ReactNoopUpdateQueue</code>维护着 react 的更新队列。</p>\n\n          <h2 id='toc-2-3' >\n            React 源码\n          </h2>\n        \n<p>与 React15 一样，react 输出的也是一个对象，这个对象上绑定着我们用的一些类或方法。</p>\n<pre><code class=\"language-javascript\">const React = {\n  Children: {\n    map,\n    forEach,\n    count,\n    toArray,\n    only,\n  },\n\n  Component,\n  PureComponent,\n\n  Fragment: REACT_FRAGMENT_TYPE, //react16增加了Fragment\n  StrictMode: REACT_STRICT_MODE_TYPE,\n  unstable_AsyncMode: REACT_ASYNC_MODE_TYPE,\n\n  createElement: __DEV__ ? createElementWithValidation : createElement,\n  cloneElement: __DEV__ ? cloneElementWithValidation : cloneElement,\n  createFactory: __DEV__ ? createFactoryWithValidation : createFactory,\n  isValidElement: isValidElement,\n\n  version: ReactVersion,\n\n  __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED: {\n    ReactCurrentOwner,\n    // Used by renderers to avoid bundling object-assign twice in UMD bundles:\n    assign,\n  },\n}\n</code></pre>\n<p>其中值得注意的是，react16 中增加了 Fragment，这个是 react15 中没有的。上面代码都比较简单，我就不一一说了。</p>","tableOfContents":"<ul><li><a href=\"#toc-2-1\">核心文件</a><ul></ul></li><li><a href=\"#toc-2-2\">React 目录</a><ul></ul></li><li><a href=\"#toc-2-3\">React 源码</a><ul></ul></li></ul>","frontmatter":{"title":"React 16学习(-)","date":"March 01, 2018","tags":["react"]}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/post/learn_react16_part1/","previous":{"fields":{"slug":"/post/gomoku/"},"frontmatter":{"title":"简单的五子棋"}},"next":{"fields":{"slug":"/post/learn_react16_part2/"},"frontmatter":{"title":"React 16学习(二)"}}}}